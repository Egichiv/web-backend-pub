<div class="page-container">
  <section class="flashy-section">
    <h2 class="flashy-section__heading">Добро пожаловать на сайт САМЫХ КРУТЫХ ЦИТАТ!</h2>
    <p class="flashy-section__paragraph">
      Здесь собраны самые вдохновляющие, умные, мотивирующие и смешные цитаты со всего мира.
      Погрузитесь в мир мудрости и юмора вместе с нами!
    </p>
  </section>

  <section class="general-section">
    <h2 class="section-title">Новости и объявления от администрации</h2>

    {{#if isAuthenticated}}
      <!-- Форма добавления нового поста (только для авторизованных) -->
      <div class="admin-panel">
        <h3>Добавить новый пост</h3>
        <form action="/posts/create" method="POST" class="post-form">
          <div class="form-group">
            <label for="postHeading">Заголовок поста:</label>
            <input type="text" id="postHeading" name="heading" required class="form-input">
          </div>
          <div class="form-group">
            <label for="postText">Текст поста:</label>
            <textarea id="postText" name="text" rows="4" required class="form-textarea"></textarea>
          </div>
          <button type="submit" class="btn btn-primary">Опубликовать</button>
        </form>
      </div>
    {{/if}}

    <!-- Список постов -->
    <div class="posts-container">
      {{#if posts}}
        {{#each posts}}
          <div class="post-card">
            <div class="post-card__header">
              <h3 class="post-card__title">{{title}}</h3>
              <span class="post-card__meta">
                от {{author}} • {{wordCount}} слов
              </span>
            </div>
            <div class="post-card__content">
              <p class="post-card__text">{{content}}</p>
            </div>
            {{#if ../isAuthenticated}}
              <div class="post-card__admin-actions">
                <form method="post" action="/posts/{{id}}" style="display: inline;">
                  <input type="hidden" name="_method" value="DELETE">
                  <button type="submit" class="btn btn-small btn-danger"
                          onclick="return confirm('Удалить пост?')">
                    Удалить
                  </button>
                </form>
              </div>
            {{/if}}
          </div>
        {{/each}}
      {{else}}
        <div class="empty-state">
          <p>Пока нет ни одного поста. Заходите позже!</p>
          {{#if isAuthenticated}}
            <p>Как администратор, вы можете создать первый пост выше.</p>
          {{/if}}
        </div>
      {{/if}}
    </div>
  </section>

  <!-- Секция с любимыми цитатами -->
  <section class="general-section">
    <h2 class="section-title">Любимые цитаты админа</h2>
    <div class="new-quotes">
      <div class="new-quotes__content">
        {{#if latestQuotes}}
          {{#each latestQuotes}}
            <blockquote class="new-quotes__quote">
              "{{this.text}}"
              <footer>— {{this.author}}</footer>
            </blockquote>
          {{/each}}
        {{else}}
          <p>Скоро здесь появятся новые цитаты!</p>
        {{/if}}
      </div>
    </div>
    <div class="text-center">
      <a href="/quotes" class="btn btn-secondary">Посмотреть все цитаты →</a>
    </div>
  </section>
</div>