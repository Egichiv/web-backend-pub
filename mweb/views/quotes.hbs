<!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–∏—Å–∫–∞ –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ü–∏—Ç–∞—Ç -->
<div class="page-container">
  <section class="general-section">
    <h1 class="page-title">üîç –ü–æ–∏—Å–∫ —Ü–∏—Ç–∞—Ç</h1>

    <!-- –§–æ—Ä–º–∞ –ø–æ–∏—Å–∫–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ -->
    <div class="search-section">
      <form action="/quotes" method="GET" class="search-form">
        <div class="filters-container">
          <div class="form-group">
            <label for="searchText">–ü–æ–∏—Å–∫ –ø–æ —Ç–µ–∫—Å—Ç—É:</label>
            <input type="text"
                   id="searchText"
                   name="search"
                   value="{{searchQuery}}"
                   placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞..."
                   class="form-input">
          </div>

          <div class="form-group">
            <label for="authorFilter">–ê–≤—Ç–æ—Ä:</label>
            <input type="text"
                   id="authorFilter"
                   name="author"
                   value="{{authorFilter}}"
                   placeholder="–ò–º—è –∞–≤—Ç–æ—Ä–∞..."
                   class="form-input">
          </div>

          <div class="form-group">
            <label for="genreFilter">–ñ–∞–Ω—Ä:</label>
            <select id="genreFilter" name="genre" class="form-select">
              <option value="">–í—Å–µ –∂–∞–Ω—Ä—ã</option>
              <option value="smart" {{#if (eq genreFilter 'smart')}}selected{{/if}}>–£–º–Ω–∞—è</option>
              <option value="motivating" {{#if (eq genreFilter 'motivating')}}selected{{/if}}>–ú–æ—Ç–∏–≤–∏—Ä—É—é—â–∞—è</option>
              <option value="realistic" {{#if (eq genreFilter 'realistic')}}selected{{/if}}>–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è</option>
              <option value="funny" {{#if (eq genreFilter 'funny')}}selected{{/if}}>–°–º–µ—à–Ω–∞—è</option>
            </select>
          </div>

          <div class="form-group">
            <label for="sortBy">–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:</label>
            <select id="sortBy" name="sort" class="form-select">
              <option value="date_desc" {{#if (eq sortBy 'date_desc')}}selected{{/if}}>–°–Ω–∞—á–∞–ª–∞ –Ω–æ–≤—ã–µ</option>
              <option value="date_asc" {{#if (eq sortBy 'date_asc')}}selected{{/if}}>–°–Ω–∞—á–∞–ª–∞ —Å—Ç–∞—Ä—ã–µ</option>
              <option value="author" {{#if (eq sortBy 'author')}}selected{{/if}}>–ü–æ –∞–≤—Ç–æ—Ä—É</option>
            </select>
          </div>
        </div>

        <div class="search-buttons">
          <button type="submit" class="btn btn-primary">üîç –ù–∞–π—Ç–∏</button>
          <a href="/quotes" class="btn btn-secondary">–°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã</a>
        </div>
      </form>
    </div>
  </section>

  <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ -->
  <section class="quotes-marks-section">
    <h2 class="quotes-marks-section__heading">
      üìö –ù–∞–π–¥–µ–Ω–æ —Ü–∏—Ç–∞—Ç: {{quotesCount}}
    </h2>

    {{#if quotes}}
      <div class="table-container">
        <table class="quotes-table quotes-marks-section__table">
          <thead>
          <tr>
            <th>ID</th>
            <th>–ê–≤—Ç–æ—Ä</th>
            <th>–¶–∏—Ç–∞—Ç–∞</th>
            <th>–ñ–∞–Ω—Ä</th>
            <th>–î–∞—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è</th>
            {{#if isAuthenticated}}
              <th>–î–µ–π—Å—Ç–≤–∏—è</th>
            {{/if}}
          </tr>
          </thead>
          <tbody>
          {{#each quotes}}
            {{> quote-row this isAuthenticated=../isAuthenticated}}
          {{/each}}
          </tbody>
        </table>
      </div>

      <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
      {{#if hasPagination}}
        <div class="pagination">
          {{#if hasPrevPage}}
            <a href="/quotes?page={{prevPage}}&search={{searchQuery}}&author={{authorFilter}}&genre={{genreFilter}}&sort={{sortBy}}"
            class="pagination__link">‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∞—è</a>
          {{/if}}

          <span class="pagination__info">
                        –°—Ç—Ä–∞–Ω–∏—Ü–∞ {{currentPage}} –∏–∑ {{totalPages}}
                    </span>

          {{#if hasNextPage}}
            <a href="/quotes?page={{nextPage}}&search={{searchQuery}}&author={{authorFilter}}&genre={{genreFilter}}&sort={{sortBy}}"
            class="pagination__link">–°–ª–µ–¥—É—é—â–∞—è ‚Üí</a>
          {{/if}}
        </div>
      {{/if}}
    {{else}}
      <div class="empty-state">
        <p>–ü–æ –≤–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞.</p>
        <a href="/add-quote" class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–≤—É—é —Ü–∏—Ç–∞—Ç—É</a>
      </div>
    {{/if}}
  </section>
</div>