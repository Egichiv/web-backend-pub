<!-- Страница "О сайте" с комментариями пользователей -->
<div class="page-container">
  <section class="flashy-section">
    <h1 class="flashy-section__heading">О сайте "САМЫЕ КРУТЫЕ ЦИТАТЫ"</h1>
    <p class="flashy-section__paragraph">
      Наш сайт создан для всех, кто ценит мудрость, юмор и вдохновение,
      заключенные в коротких, но емких высказываниях великих людей и не только.
    </p>
  </section>

  <section class="general-section">
    <h2 class="section-title">Наша миссия</h2>
    <div class="content-block">
      <p>
        Мы стремимся собрать самую обширную коллекцию цитат на русском языке,
        которая будет вдохновлять, мотивировать и заставлять задуматься.
        Каждая цитата на нашем сайте тщательно отобрана и проверена на подлинность.
      </p>
      <p>
        <strong>Что делает нас особенными:</strong>
      </p>
      <ul class="features-list">
        <li>- Тщательно отобранные цитаты высокого качества</li>
        <li>- Удобная система поиска и фильтрации</li>
        <li>- Активное сообщество любителей мудрых мыслей</li>
        <li>- Ежедневное пополнение коллекции</li>
        <li>- Уникальная подборка мемов для поднятия настроения</li>
      </ul>
    </div>
  </section>

  <section class="general-section">
    <h2 class="section-title">Об авторе</h2>
    <div class="author-info">
      <p>
        <strong>Создатель сайта:</strong> Иващенко Егор Сергеевич, студент группы M3314<br>
        <strong>Проект:</strong> Лабораторные работы по Web-разработке 2024-2025<br>
        <strong>Контакты:</strong> <a href="mailto:admin@quotes.site">admin@quotes.site</a>
      </p>
    </div>
  </section>

  <!-- Форма добавления комментария -->
  <section class="general-section">
    <h2 class="section-title">Оставить отзыв о сайте</h2>

    {{#if commentSuccess}}
      <div class="alert alert-success">
        Спасибо за ваш отзыв!
      </div>
    {{/if}}

    <div class="comment-form-container">
      <form action="/comments/create" method="POST" class="comment-form">
        <div class="form-group">
          <label for="commentAuthor" class="required">Ваше имя:</label>
          <input type="text"
                 id="commentAuthor"
                 name="author"
                 required
                 placeholder="Как вас зовут?"
                 maxlength="50"
                 {{#if username}}value="{{username}}"{{/if}}
            {{#if isAuthenticated}}readonly{{/if}}
                 class="form-input">
        </div>

        <div class="form-group">
          <label for="commentText" class="required">Ваш комментарий:</label>
          <textarea id="commentText"
                    name="text"
                    rows="4"
                    required
                    placeholder="Поделитесь вашим мнением о сайте..."
                    maxlength="300"
                    class="form-textarea"></textarea>
          <small class="form-hint">Максимум 300 символов</small>
        </div>

        <div class="form-actions">
          <button type="submit" class="btn btn-primary">
            Отправить комментарий
          </button>
        </div>
      </form>
    </div>
  </section>

  <!-- Список комментариев -->
  <section class="general-section">
    <h2 class="section-title">Отзывы пользователей ({{commentsCount}})</h2>

    <div class="comments-container">
      {{#if comments}}
        {{#each comments}}
          {{> commentCard this canDelete=(or ../isAuthenticated (eq this.author ../username))}}
        {{/each}}

        <!-- Пагинация для комментариев -->
        {{#if hasPagination}}
          <div class="pagination">
            {{#if hasPrevPage}}
              <a href="/about?page={{prevPage}}" class="pagination__link">← Предыдущие</a>
            {{/if}}

            <span class="pagination__info">
                            Страница {{currentPageNumber}} из {{totalPages}}
                        </span>

            {{#if hasNextPage}}
              <a href="/about?page={{nextPage}}" class="pagination__link">Следующие →</a>
            {{/if}}
          </div>
        {{/if}}
      {{else}}
        <div class="empty-state">
          <p>Пока нет ни одного отзыва. Будьте первым!</p>
        </div>
      {{/if}}
    </div>
  </section>

  <!-- Статистика сайта -->
  <section class="general-section">
    <h2 class="section-title">Статистика сайта</h2>
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-number">{{stats.totalQuotes}}</div>
        <div class="stat-label">Всего цитат</div>
      </div>
      <div class="stat-card">
        <div class="stat-number">{{stats.totalAuthors}}</div>
        <div class="stat-label">Авторов</div>
      </div>
      <div class="stat-card">
        <div class="stat-number">{{stats.totalUsers}}</div>
        <div class="stat-label">Пользователей</div>
      </div>
      <div class="stat-card">
        <div class="stat-number">{{stats.totalComments}}</div>
        <div class="stat-label">Комментариев</div>
      </div>
    </div>
  </section>
</div>